{"ast":null,"code":"import React,{useEffect}from\"react\";/* REACT ROUTER */import{Link}from\"react-router-dom\";/* REACT BOOTSTRAP */import{Row,Col,Image,ListGroup,Button,Card,Form}from\"react-bootstrap\";/* COMPONENTS */import Message from\"../components/Message\";/* REACT - REDUX */import{useDispatch,useSelector}from\"react-redux\";/* ACTION CREATORS */import{addToCart,removeFromCart}from\"../actions/cartActions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(_ref){let{match,location,history}=_ref;/* GETTING DATA FROM URL IF PRESENT */const productId=match.params.id;const qty=location.search?Number(location.search.split(\"=\")[1]):1;//qty: '?qty=3' -> ['?qty',3] -> 3\n/* FIRING OFF DISPATCH, BUT ONLY IF WE HAVE A PRODUCT ID & QUANTITY */const dispatch=useDispatch();useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);/* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */const cart=useSelector(state=>state.cart);const{cartItems}=cart;/* HANDLERS */const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const checkoutHandler=()=>{history.push(\"/login?redirect=shipping\");};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{m:3,children:/*#__PURE__*/_jsx(Link,{to:`/product/${item.product}`,children:item.name})}),/*#__PURE__*/_jsxs(Col,{children:[\"\\u20B9\",item.price]}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:e=>dispatch(addToCart(item.product,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.product),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product))})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\") items\"]}),\"\\u20B9\",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"w-100\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Link","Row","Col","Image","ListGroup","Button","Card","Form","Message","useDispatch","useSelector","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","_ref","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","removeFromCartHandler","checkoutHandler","push","children","md","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","m","product","price","Control","as","value","onChange","e","target","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["C:/Users/Pranitha/OneDrive/Desktop/VV/ecommerce-django-react/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\n\r\n/* REACT ROUTER */\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/* REACT BOOTSTRAP */\r\nimport {\r\n  Row,\r\n  Col,\r\n  Image,\r\n  ListGroup,\r\n  Button,\r\n  Card,\r\n  Form,\r\n} from \"react-bootstrap\";\r\n\r\n/* COMPONENTS */\r\nimport Message from \"../components/Message\";\r\n\r\n/* REACT - REDUX */\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n/* ACTION CREATORS */\r\nimport { addToCart, removeFromCart } from \"../actions/cartActions\";\r\n\r\nfunction CartScreen({ match, location, history }) {\r\n  /* GETTING DATA FROM URL IF PRESENT */\r\n  const productId = match.params.id;\r\n\r\n  const qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\r\n  //qty: '?qty=3' -> ['?qty',3] -> 3\r\n\r\n  /* FIRING OFF DISPATCH, BUT ONLY IF WE HAVE A PRODUCT ID & QUANTITY */\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  /* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */\r\n  const cart = useSelector((state) => state.cart);\r\n  const { cartItems } = cart;\r\n\r\n  /* HANDLERS */\r\n\r\n  const removeFromCartHandler = (id) => {\r\n    dispatch(removeFromCart(id));\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    history.push(\"/login?redirect=shipping\");\r\n  };\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message variant=\"info\">\r\n            Your cart is empty. <Link to=\"/\">Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n          <ListGroup variant=\"flush\">\r\n            {cartItems.map((item) => (\r\n              <ListGroup.Item key={item.product}>\r\n                <Row>\r\n                  <Col md={2}>\r\n                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                  </Col>\r\n\r\n                  <Col m={3}>\r\n                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                  </Col>\r\n\r\n                  <Col>₹{item.price}</Col>\r\n\r\n                  <Col md={3}>\r\n                    <Form.Control\r\n                      as=\"select\"\r\n                      value={item.qty}\r\n                      onChange={(e) =>\r\n                        dispatch(\r\n                          addToCart(item.product, Number(e.target.value))\r\n                        )\r\n                      }\r\n                    >\r\n                      {[...Array(item.countInStock).keys()].map((x) => (\r\n                        <option key={x + 1} value={x + 1}>\r\n                          {x + 1}\r\n                        </option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </Col>\r\n\r\n                  <Col md={1}>\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"light\"\r\n                      onClick={() => removeFromCartHandler(item.product)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </Col>\r\n                </Row>\r\n              </ListGroup.Item>\r\n            ))}\r\n          </ListGroup>\r\n        )}\r\n      </Col>\r\n\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <h2>\r\n                Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)})\r\n                items\r\n              </h2>\r\n              ₹\r\n              {cartItems\r\n                .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                .toFixed(2)}\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n\r\n          <ListGroup.Item>\r\n            <Button\r\n              type=\"button\"\r\n              className=\"w-100\"\r\n              disabled={cartItems.length === 0}\r\n              onClick={checkoutHandler}\r\n            >\r\n              Proceed To Checkout\r\n            </Button>\r\n          </ListGroup.Item>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n\r\nexport default CartScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}