{"ast":null,"code":"import React,{useEffect}from\"react\";/* REACT ROUTER BOOTSTRAP */import{LinkContainer}from\"react-router-bootstrap\";/* REACT BOOTSTRAP */import{Table,Button,Row,Col}from\"react-bootstrap\";/* COMPONENTS */import Message from\"../components/Message\";import Loader from\"../components/Loader\";import Paginate from\"../components/Paginate\";/* REACT - REDUX */import{useDispatch,useSelector}from\"react-redux\";/* ACTION CREATORS */import{listProducts,deleteProduct,createProduct}from\"../actions/productActions\";/* ACTION TYPES */import{PRODUCT_CREATE_RESET}from\"../constants/productConstants\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductListScreen(_ref){let{match,history}=_ref;const dispatch=useDispatch();/* PULLING OUT STATE */const productList=useSelector(state=>state.productList);const{products,pages,page,loading,error}=productList;const productDelete=useSelector(state=>state.productDelete);const{success:successDelete,loading:loadingDelete,error:errorDelete}=productDelete;const productCreate=useSelector(state=>state.productCreate);const{product:createdProduct,success:successCreate,loading:loadingCreate,error:errorCreate}=productCreate;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;// GETTING PAGE NUMBER (KEYWORD IS PAGE NUMBER)\nlet keyword=history.location.search;useEffect(()=>{dispatch({type:PRODUCT_CREATE_RESET});// WE DON'T WANT NON ADMINS TO ACCESS THIS PAGE SO REDIRECT IF SOMEBODY TRIES TO\nif(!userInfo.isAdmin){history.push(\"/login\");}// CHECK IF PRODUCT CREATED, IF YES THEN REDIRECT TO EDIT PAGE\nif(successCreate){history.push(`/admin/product/${createdProduct._id}/edit`);}else{dispatch(listProducts(keyword));}// AFTER CREATING PRODUCT, LOAD IN PRODUCTS AGAIN, ADD successCreate IN DEPENDENCIES\n// AFTER DELETING PRODUCT, LOAD IN PRODUCTS AGAIN, ADD successDelete IN DEPENDENCIES\n},[dispatch,history,userInfo,successDelete,successCreate,createdProduct,keyword]);/* HANDLER */const deleteHandler=id=>{if(window.confirm(\"Are you sure you want to delete this product ?\")){dispatch(deleteProduct(id));}};const createProcutHandler=()=>{dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-end\",children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createProcutHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"]})})]}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:`/admin/product/${product._id}/edit`,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:()=>deleteHandler(product._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id))})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});}export default ProductListScreen;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Row","Col","Message","Loader","Paginate","useDispatch","useSelector","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","jsx","_jsx","jsxs","_jsxs","ProductListScreen","_ref","match","history","dispatch","productList","state","products","pages","page","loading","error","productDelete","success","successDelete","loadingDelete","errorDelete","productCreate","product","createdProduct","successCreate","loadingCreate","errorCreate","userLogin","userInfo","keyword","location","search","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProcutHandler","children","className","onClick","variant","striped","bordered","hover","responsive","map","name","price","category","brand","to"],"sources":["C:/Users/Pranitha/OneDrive/Desktop/VV/ecommerce-django-react/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\n\r\n/* REACT ROUTER BOOTSTRAP */\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\n\r\n/* REACT BOOTSTRAP */\r\nimport { Table, Button, Row, Col } from \"react-bootstrap\";\r\n\r\n/* COMPONENTS */\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport Paginate from \"../components/Paginate\";\r\n\r\n/* REACT - REDUX */\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n/* ACTION CREATORS */\r\nimport {\r\n  listProducts,\r\n  deleteProduct,\r\n  createProduct,\r\n} from \"../actions/productActions\";\r\n\r\n/* ACTION TYPES */\r\nimport { PRODUCT_CREATE_RESET } from \"../constants/productConstants\";\r\n\r\nfunction ProductListScreen({ match, history }) {\r\n  const dispatch = useDispatch();\r\n\r\n  /* PULLING OUT STATE */\r\n  const productList = useSelector((state) => state.productList);\r\n  const { products, pages, page, loading, error } = productList;\r\n\r\n  const productDelete = useSelector((state) => state.productDelete);\r\n  const {\r\n    success: successDelete,\r\n    loading: loadingDelete,\r\n    error: errorDelete,\r\n  } = productDelete;\r\n\r\n  const productCreate = useSelector((state) => state.productCreate);\r\n  const {\r\n    product: createdProduct,\r\n    success: successCreate,\r\n    loading: loadingCreate,\r\n    error: errorCreate,\r\n  } = productCreate;\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  // GETTING PAGE NUMBER (KEYWORD IS PAGE NUMBER)\r\n  let keyword = history.location.search;\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: PRODUCT_CREATE_RESET });\r\n\r\n    // WE DON'T WANT NON ADMINS TO ACCESS THIS PAGE SO REDIRECT IF SOMEBODY TRIES TO\r\n\r\n    if (!userInfo.isAdmin) {\r\n      history.push(\"/login\");\r\n    }\r\n\r\n    // CHECK IF PRODUCT CREATED, IF YES THEN REDIRECT TO EDIT PAGE\r\n    if (successCreate) {\r\n      history.push(`/admin/product/${createdProduct._id}/edit`);\r\n    } else {\r\n      dispatch(listProducts(keyword));\r\n    }\r\n\r\n    // AFTER CREATING PRODUCT, LOAD IN PRODUCTS AGAIN, ADD successCreate IN DEPENDENCIES\r\n    // AFTER DELETING PRODUCT, LOAD IN PRODUCTS AGAIN, ADD successDelete IN DEPENDENCIES\r\n  }, [\r\n    dispatch,\r\n    history,\r\n    userInfo,\r\n    successDelete,\r\n    successCreate,\r\n    createdProduct,\r\n    keyword,\r\n  ]);\r\n\r\n  /* HANDLER */\r\n  const deleteHandler = (id) => {\r\n    if (window.confirm(\"Are you sure you want to delete this product ?\")) {\r\n      dispatch(deleteProduct(id));\r\n    }\r\n  };\r\n\r\n  const createProcutHandler = () => {\r\n    dispatch(createProduct());\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Row className=\"align-items-center\">\r\n        <Col>\r\n          <h1>Products</h1>\r\n        </Col>\r\n\r\n        <Col className=\"text-end\">\r\n          <Button className=\"my-3\" onClick={createProcutHandler}>\r\n            <i className=\"fas fa-plus\"></i> Create Product\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n\r\n      {loadingCreate && <Loader />}\r\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\r\n\r\n      {loadingDelete && <Loader />}\r\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\r\n\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : (\r\n        <div>\r\n          <Table striped bordered hover responsive className=\"table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>NAME</th>\r\n                <th>PRICE</th>\r\n                <th>CATEGORY</th>\r\n                <th>BRAND</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {products.map((product) => (\r\n                <tr key={product._id}>\r\n                  <td>{product._id}</td>\r\n                  <td>{product.name}</td>\r\n                  <td>â‚¹{product.price}</td>\r\n                  <td>{product.category}</td>\r\n                  <td>{product.brand}</td>\r\n\r\n                  <td>\r\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                      <Button variant=\"light\" className=\"btn-sm\">\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </Button>\r\n                    </LinkContainer>\r\n\r\n                    <Button\r\n                      variant=\"danger\"\r\n                      className=\"btn-sm\"\r\n                      onClick={() => deleteHandler(product._id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </Button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n\r\n          <Paginate pages={pages} page={page} isAdmin={true} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductListScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}