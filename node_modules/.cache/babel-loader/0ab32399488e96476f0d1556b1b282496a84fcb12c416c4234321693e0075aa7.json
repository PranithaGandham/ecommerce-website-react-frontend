{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import ReCAPTCHA from'react-google-recaptcha';import{GoogleLogin}from'@react-oauth/google';/* REACT ROUTER */import{Link}from\"react-router-dom\";/* REACT BOOTSTRAP */import{Row,Col,Button,Form}from\"react-bootstrap\";/* COMPONENTS */import Message from\"../components/Message\";import Loader from\"../components/Loader\";import FormContainer from\"../components/FormContainer\";/* REACT - REDUX */import{useDispatch,useSelector}from\"react-redux\";/* ACTION CREATORS */import{login,googleLogin}from\"../actions/userActions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginScreen(_ref){let{location,history}=_ref;/* STATE */const[email,setEmail]=useState(\"\");const[password,setpassword]=useState(\"\");const[capVal,setCapVal]=useState(null);const dispatch=useDispatch();/* SETTING UP REDIRECT */const redirect=location.search?location.search.split(\"=\")[1]:\"/\";/* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */const userLogin=useSelector(state=>state.userLogin);const{userInfo,loading,error}=userLogin;/* REDIRECTING AN ALREADY LOGGED IN USER, AS WE DON'T WANT THEM TO SEE THE LOGIN PAGE */useEffect(()=>{if(userInfo){history.push(redirect);}},[history,userInfo,redirect]);/* HANDLERS */const submitHandler=e=>{e.preventDefault();/* FIRING OFF THE ACTION CREATORS USING DISPATCH FOR LOGIN */dispatch(login(email,password));};const responseGoogle=response=>{console.log(\"Google Response:\",response);// Log the whole response to inspect\nconst accessToken=response.credential;// Get the correct token\nconsole.log(\"Access Token:\",accessToken);dispatch(googleLogin(accessToken));};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign In\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:e=>setpassword(e.target.value)})]}),/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:\"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\",onChange:val=>{setCapVal(val);}}),/*#__PURE__*/_jsx(Button,{disabled:!capVal,type:\"submit\",variant:\"primary\",className:\"mt-3\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"text-danger\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"845512665517-sqrndab2vlttb0o4lba1nivu6civ38h4.apps.googleusercontent.com\",buttonText:\"Sign in with Google\",onSuccess:responseGoogle,onFailure:error=>console.log(\"Google Sign In was unsuccessful. Try again later\",error)})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"New Customer ?\",\" \",/*#__PURE__*/_jsx(Link,{to:redirect?`/register?redirect=${redirect}`:\"/register\",children:\"Register\"})]})})]});}export default LoginScreen;","map":{"version":3,"names":["React","useState","useEffect","ReCAPTCHA","GoogleLogin","Link","Row","Col","Button","Form","Message","Loader","FormContainer","useDispatch","useSelector","login","googleLogin","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","location","history","email","setEmail","password","setpassword","capVal","setCapVal","dispatch","redirect","search","split","userLogin","state","userInfo","loading","error","push","submitHandler","e","preventDefault","responseGoogle","response","console","log","accessToken","credential","children","variant","onSubmit","Group","controlId","Label","Control","type","placeholder","value","onChange","target","sitekey","val","disabled","className","to","clientId","buttonText","onSuccess","onFailure"],"sources":["C:/Users/Pranitha/OneDrive/Desktop/VV/ecommerce-django-react/frontend/src/screens/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\n\r\n/* REACT ROUTER */\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/* REACT BOOTSTRAP */\r\nimport { Row, Col, Button, Form } from \"react-bootstrap\";\r\n\r\n/* COMPONENTS */\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport FormContainer from \"../components/FormContainer\";\r\n\r\n/* REACT - REDUX */\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n/* ACTION CREATORS */\r\nimport { login, googleLogin } from \"../actions/userActions\";\r\n\r\nfunction LoginScreen({ location, history }) {\r\n  /* STATE */\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setpassword] = useState(\"\");\r\n  const [capVal, setCapVal]=useState(null)\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  /* SETTING UP REDIRECT */\r\n  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n\r\n  /* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n\r\n  const { userInfo, loading, error } = userLogin;\r\n\r\n  /* REDIRECTING AN ALREADY LOGGED IN USER, AS WE DON'T WANT THEM TO SEE THE LOGIN PAGE */\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      history.push(redirect);\r\n    }\r\n  }, [history, userInfo, redirect]);\r\n\r\n  /* HANDLERS */\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    /* FIRING OFF THE ACTION CREATORS USING DISPATCH FOR LOGIN */\r\n    dispatch(login(email, password));\r\n  };\r\n\r\n  const responseGoogle = (response) => {\r\n    console.log(\"Google Response:\", response); // Log the whole response to inspect\r\n    const accessToken = response.credential; // Get the correct token\r\n    console.log(\"Access Token:\", accessToken);\r\n    dispatch(googleLogin(accessToken));\r\n  };\r\n\r\n  return (\r\n    <FormContainer>\r\n      <h1>Sign In</h1>\r\n\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {loading && <Loader />}\r\n\r\n      <Form onSubmit={submitHandler}>\r\n        <Form.Group controlId=\"email\">\r\n          <Form.Label>Email Address</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            placeholder=\"Enter Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"Enter Password\"\r\n            value={password}\r\n            onChange={(e) => setpassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <ReCAPTCHA\r\n        sitekey=\"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\"\r\n        onChange={(val)=>{setCapVal(val)}}\r\n        />\r\n\r\n\r\n        <Button disabled={!capVal} type=\"submit\" variant=\"primary\" className=\"mt-3\">\r\n          Sign up\r\n        </Button>\r\n\r\n        <p className=\"mt-3\"><Link to=\"/forgot-password\" className=\"text-danger\">Forgot Password?</Link></p>\r\n        \r\n        <GoogleLogin\r\n          clientId=\"845512665517-sqrndab2vlttb0o4lba1nivu6civ38h4.apps.googleusercontent.com\"\r\n          buttonText=\"Sign in with Google\"\r\n          onSuccess={responseGoogle}\r\n          onFailure={(error) => console.log(\"Google Sign In was unsuccessful. Try again later\", error)}\r\n        />\r\n      </Form>\r\n\r\n      <Row className=\"py-3\">\r\n        <Col>\r\n          New Customer ?{\" \"}\r\n          <Link to={redirect ? `/register?redirect=${redirect}` : \"/register\"}>\r\n            Register\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n    </FormContainer>\r\n  );\r\n}\r\n\r\nexport default LoginScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}