{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import ReCAPTCHA from'react-google-recaptcha';import{GoogleLogin}from'@react-oauth/google';import{useHistory,useLocation}from'react-router-dom';/* REACT ROUTER */import{Link}from\"react-router-dom\";/* REACT BOOTSTRAP */import{Row,Col,Button,Form}from\"react-bootstrap\";/* COMPONENTS */import Message from\"../components/Message\";import Loader from\"../components/Loader\";import FormContainer from\"../components/FormContainer\";/* REACT - REDUX */import{useDispatch,useSelector}from\"react-redux\";/* ACTION CREATORS */import{register}from\"../actions/userActions\";import{googleLogin}from\"../actions/userActions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterScreen(){/* STATE */const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setpassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[message,setMessage]=useState(\"\");const dispatch=useDispatch();const history=useHistory();const location=useLocation();const[capVal,setCapVal]=useState(null);/* SETTING UP REDIRECT */const redirect=location.search?location.search.split(\"=\")[1]:\"/\";/* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */const userRegister=useSelector(state=>state.userRegister);const{userInfo,loading,error}=userRegister;/* REDIRECTING AN ALREADY LOGGED IN USER, AS WE DON'T WANT THEM TO SEE THE LOGIN PAGE */useEffect(()=>{if(userInfo){history.push(redirect);}},[history,userInfo,redirect]);/* HANDLERS */const submitHandler=e=>{e.preventDefault();/* DISABLE SUBMIT IF PASSWORDS DON'T MATCH */if(password!==confirmPassword){setMessage(\"Passwords do not match\");}else{/* FIRING OFF THE ACTION CREATORS USING DISPATCH FOR REGISTER */dispatch(register(name,email,password));}};const responseGoogle=response=>{console.log(\"Google Response:\",response);// Log the whole response to inspect\nconst accessToken=response.credential;// Get the correct token\nconsole.log(\"Access Token:\",accessToken);dispatch(googleLogin(accessToken));history.push(redirect);// Redirect the user to the desired page\n};return/*#__PURE__*/_jsxs(FormContainer,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),message&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:message}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"name\",placeholder:\"Enter Name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"email\",placeholder:\"Enter Email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"password\",placeholder:\"Enter Password\",value:password,onChange:e=>setpassword(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"passwordConfirm\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value)})]}),/*#__PURE__*/_jsx(GoogleLogin,{clientId:\"845512665517-sqrndab2vlttb0o4lba1nivu6civ38h4.apps.googleusercontent.com\",buttonText:\"Register with Google\",onSuccess:responseGoogle,onFailure:error=>console.log(\"Google Sign In was unsuccessful. Try again later\",error)}),/*#__PURE__*/_jsx(ReCAPTCHA,{sitekey:\"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\",onChange:val=>{setCapVal(val);}}),/*#__PURE__*/_jsx(Button,{disabled:!capVal,type:\"submit\",variant:\"primary\",className:\"mt-3\",children:\"Register\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{children:[\"Have an Account ?\",\" \",/*#__PURE__*/_jsx(Link,{to:redirect?`/login?redirect=${redirect}`:\"/login\",children:\"Sign In\"})]})})]});}export default RegisterScreen;","map":{"version":3,"names":["React","useState","useEffect","ReCAPTCHA","GoogleLogin","useHistory","useLocation","Link","Row","Col","Button","Form","Message","Loader","FormContainer","useDispatch","useSelector","register","googleLogin","jsx","_jsx","jsxs","_jsxs","RegisterScreen","name","setName","email","setEmail","password","setpassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","history","location","capVal","setCapVal","redirect","search","split","userRegister","state","userInfo","loading","error","push","submitHandler","e","preventDefault","responseGoogle","response","console","log","accessToken","credential","children","variant","onSubmit","Group","controlId","Label","Control","required","type","placeholder","value","onChange","target","clientId","buttonText","onSuccess","onFailure","sitekey","val","disabled","className","to"],"sources":["C:/Users/Pranitha/OneDrive/Desktop/VV/ecommerce-django-react/frontend/src/screens/RegisterScreen.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n/* REACT ROUTER */\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/* REACT BOOTSTRAP */\r\nimport { Row, Col, Button, Form } from \"react-bootstrap\";\r\n\r\n/* COMPONENTS */\r\nimport Message from \"../components/Message\";\r\nimport Loader from \"../components/Loader\";\r\nimport FormContainer from \"../components/FormContainer\";\r\n\r\n/* REACT - REDUX */\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\n/* ACTION CREATORS */\r\nimport { register } from \"../actions/userActions\";\r\nimport {  googleLogin } from \"../actions/userActions\";\r\n\r\nfunction RegisterScreen() {\r\n  /* STATE */\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setpassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  \r\n  const [capVal, setCapVal]=useState(null)\r\n\r\n  /* SETTING UP REDIRECT */\r\n  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n\r\n  /* PULLING A PART OF STATE FROM THE ACTUAL STATE IN THE REDUX STORE */\r\n  const userRegister = useSelector((state) => state.userRegister);\r\n\r\n  const { userInfo, loading, error } = userRegister;\r\n\r\n  /* REDIRECTING AN ALREADY LOGGED IN USER, AS WE DON'T WANT THEM TO SEE THE LOGIN PAGE */\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      history.push(redirect);\r\n    }\r\n  }, [history, userInfo, redirect]);\r\n\r\n  /* HANDLERS */\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    /* DISABLE SUBMIT IF PASSWORDS DON'T MATCH */\r\n    if (password !== confirmPassword) {\r\n      setMessage(\"Passwords do not match\");\r\n    } else {\r\n      /* FIRING OFF THE ACTION CREATORS USING DISPATCH FOR REGISTER */\r\n      dispatch(register(name, email, password));\r\n    }\r\n  };\r\n\r\n\r\n  const responseGoogle = (response) => {\r\n    console.log(\"Google Response:\", response); // Log the whole response to inspect\r\n    const accessToken = response.credential; // Get the correct token\r\n    console.log(\"Access Token:\", accessToken);\r\n    dispatch(googleLogin(accessToken));\r\n    history.push(redirect); // Redirect the user to the desired page\r\n  };\r\n  \r\n\r\n\r\n  return (\r\n    <FormContainer>\r\n      <h1>Register</h1>\r\n\r\n      {message && <Message variant=\"danger\">{message}</Message>}\r\n      {error && <Message variant=\"danger\">{error}</Message>}\r\n      {loading && <Loader />}\r\n\r\n      <Form onSubmit={submitHandler}>\r\n        <Form.Group controlId=\"name\">\r\n          <Form.Label>Name</Form.Label>\r\n          <Form.Control\r\n            required\r\n            type=\"name\"\r\n            placeholder=\"Enter Name\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"email\">\r\n          <Form.Label>Email Address</Form.Label>\r\n          <Form.Control\r\n            required\r\n            type=\"email\"\r\n            placeholder=\"Enter Email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            required\r\n            type=\"password\"\r\n            placeholder=\"Enter Password\"\r\n            value={password}\r\n            onChange={(e) => setpassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n        <Form.Group controlId=\"passwordConfirm\">\r\n          <Form.Label>Confirm Password</Form.Label>\r\n          <Form.Control\r\n            required\r\n            type=\"password\"\r\n            placeholder=\"Confirm Password\"\r\n            value={confirmPassword}\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n\r\n      <GoogleLogin\r\n        clientId=\"845512665517-sqrndab2vlttb0o4lba1nivu6civ38h4.apps.googleusercontent.com\"\r\n        buttonText=\"Register with Google\"\r\n        onSuccess={responseGoogle}\r\n        onFailure={(error) => console.log(\"Google Sign In was unsuccessful. Try again later\", error)}\r\n      />\r\n\r\n        <ReCAPTCHA\r\n        sitekey=\"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI\"\r\n        onChange={(val)=>{setCapVal(val)}}\r\n        />\r\n\r\n        <Button disabled={!capVal} type=\"submit\" variant=\"primary\" className=\"mt-3\">\r\n          Register\r\n        </Button>\r\n      </Form>\r\n\r\n      <Row className=\"py-3\">\r\n        <Col>\r\n          Have an Account ?{\" \"}\r\n          <Link to={redirect ? `/login?redirect=${redirect}` : \"/login\"}>\r\n            Sign In\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n    </FormContainer>\r\n  );\r\n}\r\n\r\nexport default RegisterScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}